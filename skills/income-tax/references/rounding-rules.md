# 端数処理ルール一覧（Rounding Rules Reference）

確定申告に関する全端数処理ルールを法的根拠付きで一覧化。

## 基本原則（国税通則法）

| 条文 | 対象 | ルール |
|------|------|--------|
| 118条 | 課税標準額 | 1,000円未満切捨て |
| 119条 | 納付税額 | 100円未満切捨て（納付の場合のみ） |
| 120条 | 還付金 | 1円単位（1円未満切捨て） |

## 所得税

### 所得金額

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 給与所得（給与所得控除後） | なし（円単位） | 所得税法28条 |
| 事業所得 | なし（円単位） | — |
| 雑所得 | なし（円単位） | — |
| 合計所得金額 | なし（円単位） | — |
| 課税所得金額（㉚） | 1,000円未満切捨て | 国税通則法118条 |

### 税額計算

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 算出税額（㉛） | なし（速算表の結果そのまま） | — |
| 復興特別所得税（㊲） | 1円未満切捨て `tax * 21 // 1000` | 復興財源確保法13条 |
| 所得税及び復興特別所得税の額（㊺） | なし（㉛+㊲の合計） | — |
| 申告納税額（㊼）＝納付 | 100円未満切捨て | 国税通則法119条 |
| 還付税額 | 1円単位 | 国税通則法120条 |

### 給与所得控除

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 速算表の計算結果 | なし（円単位） | 所得税法28条 |

計算式の中で端数は発生しない（整数の速算表）。

### 公的年金等控除

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 速算表の計算結果 | なし（円単位） | 所得税法35条4項 |

### 生命保険料控除

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 新制度: 各区分の計算式 | 1円未満切り上げ | 所得税法76条 |
| 旧制度: 各区分の計算式 | 1円未満切り上げ | 所得税法76条（附則） |
| 新旧合算上限 | 40,000円（固定） | — |
| 3区分合計上限 | 120,000円（固定） | — |

実装: `-(-premium // divisor)` で切り上げ。

### 地震保険料控除

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 地震保険料 | なし（min(premium, 50,000)） | 所得税法77条 |
| 旧長期損害保険料の計算式 | 1円未満切り上げ | 所得税法77条（附則） |
| 合算上限 | 50,000円（固定） | — |

### 医療費控除

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 控除額 = 支払額 - 補填額 - 足切額 | なし（円単位） | 所得税法73条 |
| 足切額 = min(100,000, 所得×5%) | なし | — |

### 配偶者控除・配偶者特別控除

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 控除額 | なし（テーブル参照、固定額） | 所得税法83条/83条の2 |

### 扶養控除

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 控除額 | なし（年齢区分別の固定額） | 所得税法84条 |

### 住宅ローン控除（税額控除）

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 年末残高 × 0.7% | 100円未満切捨て | 租税特別措置法41条2項 |

### 配当控除（税額控除）

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 配当 × 控除率 | なし（円単位） | 所得税法92条 |

### 減価償却費

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 定額法: 取得価額 / 耐用年数 | 1円未満切捨て | 所得税法49条 |
| 定率法: 期首帳簿価額 × 償却率 | 1円未満切捨て | 所得税法49条 |
| 事業按分 | 1円未満切捨て | — |

### 小規模企業共済等掛金控除

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 控除額 = 掛金全額 | なし | 所得税法75条 |

## 消費税

### 課税標準額

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 税抜金額（10%分） | 税込 × 100 // 110、1,000円未満切捨て | 国税通則法118条 |
| 税抜金額（8%分） | 税込 × 100 // 108、1,000円未満切捨て | 国税通則法118条 |

### 消費税額

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 売上に係る国税（10%分） | 課税標準額 × 78/1000 | 消費税法29条 |
| 売上に係る国税（8%分） | 課税標準額 × 624/10000 | 消費税法29条 |
| 仕入に係る国税（10%分） | 税込仕入額 × 78/1100 | — |
| 仕入に係る国税（8%分） | 税込仕入額 × 624/10800 | — |

### 差引税額・地方消費税

| 項目 | 端数処理 | 根拠 |
|------|---------|------|
| 差引税額（正の場合） | 100円未満切捨て | 国税通則法119条 |
| 控除不足還付税額（負の場合） | 端数処理なし | — |
| 地方消費税（納付） | 差引税額 × 22/78、100円未満切捨て | 地方税法72条の89 |
| 地方消費税（還付） | 還付税額 × 22/78、100円未満切捨て（負の方向） | 地方税法72条の89 |

## 整数演算パターン

```python
# 切捨て（通常の整数除算）
amount // 1000 * 1000  # 1,000円未満切捨て
amount // 100 * 100    # 100円未満切捨て

# 切り上げ（負の除算トリック）
-(-amount // divisor)  # 1円未満切り上げ

# 100円未満切捨て（正のみ適用）
if amount > 0:
    amount = amount // 100 * 100
```
